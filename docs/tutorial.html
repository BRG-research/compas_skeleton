<!DOCTYPE html>
<html lang="en">
<head>
    <title>compas_skeleton</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <meta name="author" content="" />
    <meta name="description" content="" />

    <link rel="shortcut icon" href="_static/images/compas.ico" type="image/x-icon">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/default.min.css">
    <!-- <link rel="stylesheet" type="text/css" href="_static/css/prism.css" /> -->
    <link rel="stylesheet" type="text/css" href="_static/css/compas.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/compas-reference.css" />

    
        <link rel="next" title="Examples" href="examples.html" />
    
    
    
        <link rel="prev" title="Getting Started" href="gettingstarted.html" />
    

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</head>

<body data-spy="scroll" data-target="#compas-localnav">

    <nav class="navbar navbar-expand compas-navbar">
        <a class="navbar-brand" href="/">
            <img src="_static/images/compas_icon_white.png" width="36px" height="36px" alt="compas" />
        </a>

        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="index.html">compas_skeleton</a></li>
        </ul>

        <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a class="nav-link" target="_blank" href="">Github</a></li>
            <li class="nav-item"><a class="nav-link" target="_blank" href="https://compas-dev.github.io">COMPAS framework</a></li>
        </ul>
    </nav>    

    <div class="container-fluid">
        <div class="row flex-xl-nowrap">

            <main class="col-12 col-md-9 col-xl-8 compas-content" role="main">
                <div class="container">
                

                    

                    <div class="section" id="tutorial">
<h1>Tutorial</h1>
<div class="section" id="skeleton">
<h2>Skeleton</h2>
<p>A Skeleton contains below attributes.</p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_concept_diagram.png"><img alt="_images/skeleton_concept_diagram.png" class="figure-img img-fluid" src="_images/skeleton_concept_diagram.png" style="width: 100%;" /></a>
</div>
<ul class="simple">
<li><p>skeleton branches and skeleton vertices</p></li>
</ul>
<p>Skeleton contains a set of lines as <code class="docutils literal notranslate"><span class="pre">skeleton_branches</span></code>. The start and end points are stored as <code class="docutils literal notranslate"><span class="pre">skeleton_vertices</span></code>.
There are two typs of <code class="docutils literal notranslate"><span class="pre">skeleton_vertices</span></code>: <code class="docutils literal notranslate"><span class="pre">skeleton_joint</span></code> and <code class="docutils literal notranslate"><span class="pre">skeleton_leaf</span></code>.</p>
<ul class="simple">
<li><p>skeleton coarse mesh</p></li>
</ul>
<p>Each skeleton branch halfedge generates two new vertices as <code class="docutils literal notranslate"><span class="pre">descendent_vertices</span></code>. Together with the two <code class="docutils literal notranslate"><span class="pre">skeleton_vertices</span></code>, they compose a mesh face.
Descendent vertices and face are then added to the skeleton coarse mesh.</p>
<ul class="simple">
<li><p>special attributes</p></li>
</ul>
<p>Parameters <code class="docutils literal notranslate"><span class="pre">node_width</span></code>, <code class="docutils literal notranslate"><span class="pre">leaf_width</span></code>, <code class="docutils literal notranslate"><span class="pre">leaf_extend</span></code> represent the features of skeleton coarse mesh, respectively.</p>
<ul class="simple">
<li><p>skeleton hight-poly mesh</p></li>
</ul>
<p>Skeleton high-poly mesh is the result of coarse mesh subdivision, which is decided by attribute <code class="docutils literal notranslate"><span class="pre">sub_level</span></code>.
<code class="docutils literal notranslate"><span class="pre">sub_leve</span></code> can be increased or decreased during any step of modification, for a preferred visualisation.</p>
<div class="section" id="create-skeleton">
<h3>Create Skeleton</h3>
<p>Create Skeleton from lines:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">from</span> <span class="nn">compas_skeleton.datastructure</span> <span class="kn">import</span> <span class="n">Skeleton</span>
<span class="kn">from</span> <span class="nn">compas_skeleton.rhino</span> <span class="kn">import</span> <span class="n">SkeletonArtist</span>

<span class="n">lines</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span>
<span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">8.6</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span>
<span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">8.6</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
<span class="p">]</span>

<span class="n">skeleton</span> <span class="o">=</span> <span class="n">Skeleton</span><span class="o">.</span><span class="n">from_skeleton_lines</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="n">artist</span> <span class="o">=</span> <span class="n">SkeletonArtist</span><span class="p">(</span><span class="n">skeleton</span><span class="p">)</span>
<span class="n">artist</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</code></pre></div>
</div>
<p>Create Skeleton from a single point:</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="n">point</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">skeleton</span> <span class="o">=</span> <span class="n">Skeleton</span><span class="o">.</span><span class="n">from_center_point</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<div class="section" id="skeleton-object">
<h2>Skeleton object</h2>
<p><code class="docutils literal notranslate"><span class="pre">SkeletonObject</span></code> is the implementation of <code class="docutils literal notranslate"><span class="pre">Skeleton</span></code> in Rhino.
Each <code class="docutils literal notranslate"><span class="pre">SkeletonObject</span></code> contains a <code class="docutils literal notranslate"><span class="pre">Skeleton</span></code> as its datastructure and a customized <code class="docutils literal notranslate"><span class="pre">SkeletonArtist</span></code>. It can be added as a scene object.
Skeleton object provides interactive editing methods and visulisation in Rhino.</p>
<div class="section" id="create-skeleton-object">
<h3>Create Skeleton Object</h3>
<div class="figure align-default">
<img alt="_images/skeleton_create.gif" class="figure-img img-fluid" src="_images/skeleton_create.gif" />
</div>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">from</span> <span class="nn">compas_skeleton.datastructure</span> <span class="kn">import</span> <span class="n">Skeleton</span>
<span class="kn">from</span> <span class="nn">compas_skeleton.rhino</span> <span class="kn">import</span> <span class="n">SkeletonObject</span>
<span class="kn">import</span> <span class="nn">compas_rhino</span>

<span class="n">guids</span> <span class="o">=</span> <span class="n">compas_rhino</span><span class="o">.</span><span class="n">select_lines</span><span class="p">()</span>
<span class="n">lines</span> <span class="o">=</span> <span class="n">compas_rhino</span><span class="o">.</span><span class="n">get_line_coordinates</span><span class="p">(</span><span class="n">guids</span><span class="p">)</span>

<span class="n">skeleton</span> <span class="o">=</span> <span class="n">Skeleton</span><span class="o">.</span><span class="n">from_skeleton_lines</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
<span class="n">skeletonobject</span> <span class="o">=</span> <span class="n">SkeletonObject</span><span class="p">(</span><span class="n">skeleton</span><span class="p">)</span>
<span class="n">skeletonobject</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
<div class="section" id="interactive-input-width">
<h3>Interactive input width</h3>
<div class="figure align-default">
<img alt="_images/skeleton_dynamic_draw.gif" class="figure-img img-fluid" src="_images/skeleton_dynamic_draw.gif" />
</div>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="n">skeletonobject</span><span class="o">.</span><span class="n">dynamic_draw_widths</span><span class="p">()</span>
</code></pre></div>
</div>
<p>There are 3 steps of <code class="docutils literal notranslate"><span class="pre">dynamic_draw_widths</span></code>:</p>
<ul class="simple">
<li><p>click on the joint node, move cursor to decide node width</p></li>
<li><p>click on the leaf vertex, move cursor to decide leaf width</p></li>
<li><p>click on the leaf vertex again, move cursor to decide how far or to which direction to extend the leaf ends.</p></li>
</ul>
</div>
<div class="section" id="serilization-and-reloading">
<h3>Serilization and reloading</h3>
<p>Serilize the datastructure for further editing.</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">HERE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="n">FILE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">HERE</span><span class="p">,</span> <span class="s1">&#39;skeleton.json&#39;</span><span class="p">)</span>

<span class="c1"># method 1</span>
<span class="n">skeleton</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">FILE</span><span class="p">,</span> <span class="n">pretty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># method 2</span>
<span class="n">skeletonobject</span><span class="o">.</span><span class="n">datastructure</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">FILE</span><span class="p">,</span> <span class="n">pretty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">SkeletonObject.datastructure</span></code> is a <code class="docutils literal notranslate"><span class="pre">Skeleton</span></code> object. So the result of the two methods above are the same.
But after a skeleton object is created, we should always choose the second method so that all the modifications will be stored.</p>
</div>
<div class="section" id="interactive-editing">
<h3>Interactive editing</h3>
<p>After the skeleton mesh is created, it can be modified with interactive input.
Editing skeleton branches or changing width parameters will update related descendent vertices and as well as the entire mesh.</p>
<div class="language-python notranslate"><div class="highlight"><pre><code><span></span><span class="c1"># load skeleton from previous step</span>
<span class="n">skeleton</span> <span class="o">=</span> <span class="n">Skeleton</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">FILE</span><span class="p">)</span>
<span class="n">skeletonobject</span> <span class="o">=</span> <span class="n">SkeletonObject</span><span class="p">(</span><span class="n">skeleton</span><span class="p">)</span>

<span class="n">skeletonobject</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

<span class="n">skeletonobject</span><span class="o">.</span><span class="n">datastructure</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">FILE</span><span class="p">,</span> <span class="n">pretty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
</div>
<p>Once update mode is activated, editing methods can be called by typing command name directly in Rhino command window. Following commands are available:</p>
<div class="section" id="node-width">
<h4>node_width</h4>
<p>change the skeleton mesh width at all joint nodes.</p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_node_width.gif"><img alt="_images/skeleton_node_width.gif" class="figure-img img-fluid" src="_images/skeleton_node_width.gif" style="width: 80%;" /></a>
</div>
</div>
<div class="section" id="leaf-width">
<h4>leaf_width</h4>
<p>change the skeleton mesh width at all leaf ends.</p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_leaf_width.gif"><img alt="_images/skeleton_leaf_width.gif" class="figure-img img-fluid" src="_images/skeleton_leaf_width.gif" style="width: 80%;" /></a>
</div>
</div>
<div class="section" id="leaf-extend">
<h4>leaf_extend</h4>
<p>change how far or to which direction to extend the leaf ends.</p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_leaf_extend.gif"><img alt="_images/skeleton_leaf_extend.gif" class="figure-img img-fluid" src="_images/skeleton_leaf_extend.gif" style="width: 80%;" /></a>
</div>
</div>
<div class="section" id="m-skeleton">
<h4>m_skeleton</h4>
<p>move a skeleton vertex. all related descendent vertices will be updated accordingly.</p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_m_skeleton.gif"><img alt="_images/skeleton_m_skeleton.gif" class="figure-img img-fluid" src="_images/skeleton_m_skeleton.gif" style="width: 80%;" /></a>
</div>
</div>
<div class="section" id="m-mesh">
<h4>m_mesh</h4>
<p>move a mesh vertex. local transformation will be stored in the datastructure. when this vertex moves following skeleton vertex, the local movement will be transformed accordingly.</p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_m_mesh.gif"><img alt="_images/skeleton_m_mesh.gif" class="figure-img img-fluid" src="_images/skeleton_m_mesh.gif" style="width: 80%;" /></a>
</div>
</div>
<div class="section" id="subdivide">
<h4>subdivide</h4>
<p>increase the high poly mesh subdivision level by increasing attribute <code class="docutils literal notranslate"><span class="pre">sub_level</span></code></p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_merge.gif"><img alt="_images/skeleton_merge.gif" class="figure-img img-fluid" src="_images/skeleton_merge.gif" style="width: 80%;" /></a>
</div>
</div>
<div class="section" id="merge">
<h4>merge</h4>
<p>decrease the high poly mesh subdivision level by decreasing attribute <code class="docutils literal notranslate"><span class="pre">sub_level</span></code></p>
</div>
<div class="section" id="add-lines">
<h4>add_lines</h4>
<p>add more lines to the current skeleton branches.</p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_add_lines.gif"><img alt="_images/skeleton_add_lines.gif" class="figure-img img-fluid" src="_images/skeleton_add_lines.gif" style="width: 80%;" /></a>
</div>
</div>
</div>
<div class="section" id="remove-lines">
<h3>remove_lines</h3>
<p>remove lines from the current skeleton branches.</p>
<div class="figure align-default">
<a class="figure-img img-fluid reference internal image-reference" href="_images/skeleton_remove_lines.gif"><img alt="_images/skeleton_remove_lines.gif" class="figure-img img-fluid" src="_images/skeleton_remove_lines.gif" style="width: 80%;" /></a>
</div>
</div>
<div class="section" id="finish">
<h3>finish</h3>
<p>end this round of editing and draw the resulting high-poly mesh in Rhino.</p>
</div>
</div>
<div class="section" id="application">
<h2>Application</h2>
<p>Skeleton provides a way of sketching 2D diagrams and meshes from minimal inputs.
For example, it can be used to create force patterns for <a class="reference external" href="https://blockresearchgroup.github.io/compas-RV2">RhinoVault</a> and <a class="reference external" href="https://blockresearchgroup.github.io/compas_tna">TNA</a>.</p>
</div>
</div>

                    
                
                </div>
            </main>

            <!-- site navigation sidebar -->

            <div class="col-12 col-md-3 col-xl-2 compas-sidebar" role="navigation"> 
                <div class="navbar-light">

                    <form id="" class="d-flex compas-searchbox" action="search.html" method="get">
                        <input class="form-control" type="text" name="q" placeholder="Search docs" />
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />

                        <button class="navbar-toggler d-md-none compas-navigation-toggler" type="button" data-toggle="collapse" data-target="#compas-navigation" aria-controls="compas-navigation" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </form>

                    
                    

                        <div class="navbar-expand-md">
                            <div id="compas-navigation" class="collapse navbar-collapse compas-navigation">

                            <ul class="nav flex-column active">
<li class="nav-item"><a class="nav-link reference internal" href="intro.html">Introduction</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="gettingstarted.html">Getting Started</a></li>
<li class="nav-item active"><a class="nav-link active current reference internal" href="#">Tutorial</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="examples.html">Examples</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="api.html">API Reference</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="license.html">License</a></li>
</ul>


                            </div>
                        </div>

                    

                </div>
            </div>

            <!-- table of contents of main content -->
            
            <div class="d-none d-xl-block col-xl-2 compas-toc" role="toc">

                

                <ul class="nav flex-column" id="compas-localnav">
<li class="nav-item"><a class="nav-link reference internal" href="#">Tutorial</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#skeleton">Skeleton</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#create-skeleton">Create Skeleton</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="#skeleton-object">Skeleton object</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#create-skeleton-object">Create Skeleton Object</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#interactive-input-width">Interactive input width</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#serilization-and-reloading">Serilization and reloading</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#interactive-editing">Interactive editing</a><ul class="nav">
<li class="nav-item"><a class="nav-link reference internal" href="#node-width">node_width</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#leaf-width">leaf_width</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#leaf-extend">leaf_extend</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#m-skeleton">m_skeleton</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#m-mesh">m_mesh</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#subdivide">subdivide</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#merge">merge</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#add-lines">add_lines</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="#remove-lines">remove_lines</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#finish">finish</a></li>
</ul>
</li>
<li class="nav-item"><a class="nav-link reference internal" href="#application">Application</a></li>
</ul>
</li>
</ul>


            </div>

        </div>
    </div>

    <footer class="bg-dark pb-5">
        <div class="container text-center pt-5 pb-5 text-muted">
            
                Last updated on Apr 27, 2020.
            

            
                Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
            
        </div>
    </footer>

    
        <script type="text/javascript">
            var DOCUMENTATION_OPTIONS = {
            URL_ROOT          : '',
            VERSION           : '0.1.0',
            COLLAPSE_INDEX    : false,
            FILE_SUFFIX       : '.html',
            HAS_SOURCE        : 'false',
            SOURCELINK_SUFFIX : '.txt'
            };
        </script>

        <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/highlight.min.js"></script>

        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/js/searchtools_.js"></script>
        <!-- <script src="_static/js/prism.js"></script> -->

        <script>
        $(document).ready(function() {
        $(".language-default code").addClass("python");
        $(".language-python code").addClass("python");
        $(".language-bash code").addClass("bash");
        $(".language-cpp code").addClass("cpp");
        $(".language-json code").addClass("json");
        $(".language-none code").addClass("plaintext");

        hljs.initHighlighting();
        anchors.add();
        });
        </script>
    
</body>
</html>